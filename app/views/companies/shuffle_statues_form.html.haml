.content-wrapper
  .content-header
    .container-fluid
      .row.mb-2
        .col-md-9
          %ol.breadcrumb
            %li.breadcrumb-item
              %a{href: "/"} Home
            %li.breadcrumb-item.active Shuffle Company
          %h1.m-0.text-dark Shuffle Company
  .content
    .container-fluid

      = bootstrap_form_for(@company, url: update_status_order_company_path(@company), method: :put) do |f|
        - if @company.errors.any?
          #error_explanation
            %h2
              = pluralize(@company.errors.count, "error")
              prohibited this company from being saved:
            %ul
              - @company.errors.full_messages.each do |message|
                %li= message
        .row
          .col-md-12
            .form-group
              = f.label :lead_status_order, "Lead Status Order"
              .alert.alert-danger
                %strong Drag and Drop:
                Use your mouse to drag and drop the statuses to set their order.
              %ul#lead-status-order.list-group
                - @company.company_statuses.order(:order).each do |company_status|
                  %li.list-group-item.drag-b{ data: { status_id: company_status.status.id } }
                    %i.fa.fa-grip-vertical.mr-2{ style: "cursor: grab;" }
                      %svg{height: "16", viewbox: "0 0 16 16", width: "16", xmlns: "http://www.w3.org/2000/svg"}
                        %g{fill: "none", stroke: "currentColor", "stroke-linecap" => "round", "stroke-linejoin" => "round", "stroke-width" => "1"}
                          %path{d: "M9.75 4.75h.005v.005H9.75z"}
                          %path{d: "M10 4.75a.25.25 0 1 1-.5 0a.25.25 0 0 1 .5 0m-.25 3.245h.005V8H9.75z"}
                          %path{d: "M10 7.995a.25.25 0 1 1-.5 0a.25.25 0 0 1 .5 0m-.25 3.255h.005v.005H9.75z"}
                          %path{d: "M10 11.25a.25.25 0 1 1-.5 0a.25.25 0 0 1 .5 0m-3.75-6.5h.005v.005H6.25z"}
                          %path{d: "M6.5 4.75a.25.25 0 1 1-.5 0a.25.25 0 0 1 .5 0m-.25 3.245h.005V8H6.25z"}
                          %path{d: "M6.5 7.995a.25.25 0 1 1-.5 0a.25.25 0 0 1 .5 0m-.25 3.255h.005v.005H6.25z"}
                          %path{d: "M6.5 11.25a.25.25 0 1 1-.5 0a.25.25 0 0 1 .5 0"}
                    = company_status.status.name
                    = hidden_field_tag 'status[order][]', company_status.status.id, id: "status_order_#{company_status.status.id}"
              .d-flex
                %button.btn.btn-primary.px-4.my-4{type: "submit"}
                  Save
:javascript
  document.addEventListener('DOMContentLoaded', function() {
    const leadStatusOrder = document.getElementById('lead-status-order');

    new Sortable(leadStatusOrder, {
      animation: 150,
      onEnd: function(evt) {
        const statusIds = Array.from(leadStatusOrder.children).map((item) => item.dataset.statusId);
        const hiddenFields = leadStatusOrder.querySelectorAll('input[type="hidden"]');
        hiddenFields.forEach((field, index) => {
          field.value = statusIds[index];
        });
      }
    });
  });
:css 
  .list-group-item.drag-b {
    cursor: grab;
    border-bottom: 2px solid #dfdfdf;
    padding: 10px;
    font-size: 14px;
  }
  .list-group-item.sortable-chosen{
    border-color:#dfdfdf;
    background:#BEDBFF;
    color:#155DFC;
  }